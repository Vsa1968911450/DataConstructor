<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        function DoubleDLians(){
            function Node(data){
                this.data = data
                this.pre = null
                this.next = null
            }
            this.header = null //头部
            this.tail = null  //  尾部元素
            this.length = 0
            // 常见方法封装
            // append 尾部插入
            DoubleDLians.prototype.append = function(data){
                let newNode = new Node(data)
                if(this.length == 0) {
                    this.header = newNode
                    this.tail = newNode
                } else {
                    newNode.pre = this.tail
                    this.tail.next = newNode // 原来的尾部元素指向newnode 然后 将newnode变成最后一个元素
                    this.tail = newNode
                }
                this.length ++
            }
            // toString()
            DoubleDLians.prototype.toString = function(data){
                return this.backwordString()
            }
            // forwordString
            DoubleDLians.prototype.forwordString = function(data){
                let current = this.tail
                let res = ''
                while(current){
                    res += current.data + ' '
                    current = current.pre  // 获取上一个节点
                }
                return res
            }  
            // backwordString
            DoubleDLians.prototype.backwordString = function(data){
                let current = this.header
                let res = ''
                while(current){
                    res += current.data + ' '
                    console.log(JSON.stringify(current.data))
                    current = current.next
                }
                return res
            }
            // insert
            DoubleDLians.prototype.insert = function(position,data){
                if(position < 0 || position > this.length) return false // 越界判断
                let NewNode = new Node(data)
                // 插到第一个
                if(this.length == 0){
                    this.header = newNode
                    this.tail = newNode
                } else {
                    if(position === 0) {
                        this.header.pre = newNode
                        newNode.next = this.header
                        this.header = newNode
                    } else if(position === this.length){
                        newNode.pre = this.tail
                        this.tail.next = newNode
                        this.tail = newNode
                    } else {
                       let current = this.header
                       let index = 0
                       while(index ++ < position) {
                           newNode.next = current
                           newNode.pre = current.pre
                           current.pre.next = newNode
                           current.pre = newNode
                       }
                    }
                }
            }
            // get   
        }
        let  dbLians = new DoubleDLians()
        dbLians.append('1')
        dbLians.append('2')
        dbLians.append('3')
        dbLians.append('4')
        dbLians.append('5')
        alert(dbLians.backwordString())
        alert(dbLians.forwordString())
        
    </script>
</body>
</html>